function createList(t,e){var i,a,o="";0==e?(i=$(".cont").eq(0),a=$(".letter").eq(0)):1==e&&(i=$(".cont").eq(1),a=$(".letter").eq(1));for(var s in t){var n=t[s],c=$("<dt id="+s+">"+s+"</dt>");o+="<li id="+s+">"+s+"</li>",c.appendTo(i.find("dl"));for(var r=0;r<n.length;r++){var l=n[r];$("<dd data-code="+l.cityCode+">"+l.nameCn+"</dd>").appendTo(i.find("dl"))}}a.find("ul").html(o)}function setCity(t){var e=sessionStorage.getItem("company"),i=sessionStorage.getItem("companyCode");e?(setSessionValue("company",e),setSessionValue("companyCode",i),setSessionValue("city",t.html()),setSessionValue("cityCode",t.attr("data-code"))):(setSessionValue("city",t.html()),setSessionValue("cityCode",t.attr("data-code"))),window.location.href="portal.html"}$(document).ready(function(){var t,e,i=sessionStorage.getItem("token"),a={url:"http://airtest.rtmap.com/service-api/flight/getCities?token="+i,success:function(i){t=i.国外,e=i.国内,createList(e,0),createList(t,1)}};ajaxBase(a,!1);var o={url:"http://airtest.rtmap.com/service-api/flight/getSearchHotCity?token="+i,success:function(t){createHotList(t)}};ajaxBase(o,!1),$(".tab li").each(function(t){$(this).on("click",function(){$(".tab li").removeClass("active"),$(this).addClass("active"),$(".cont").removeClass("active"),$(".cont").eq(t).addClass("active")})}),$(".cont dl").on("click","dd",function(){setCity($(this))}),$(".hot").on("click","li",function(){setCity($(this))});var s=$(".m-header").height();$(".letter").each(function(t){$(this).on("click","li",function(){var e=$(this).index();$("html,body").stop().animate({scrollTop:$(".list").eq(t).find("dt").eq(e).offset().top-s},800)})}),$(".search input").on("input",function(){var i=$(this).val().toUpperCase();i?$(".letter").hide():$(".letter").show();var a=search(i,e);$(".cont").eq(0).find("dl").empty(),isEmptyObject(a)||createList(a,0);var o=search(i,t);$(".cont").eq(1).find("dl").empty(),isEmptyObject(o)||createList(o,1)})});
//# sourceMappingURL=maps/city.js.map

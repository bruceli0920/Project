function createDate(t){$("<li data-time="+t.time+" class="+t.sClass+'><p class="day">'+t.day+'</p><p class="month">'+t.mon+"</p></li>").appendTo($(".cont .date .time"))}function formatsTime(t,e){var a=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],s=new Date;s.setTime(t);var i=s.getMonth(),o=s.getDate();return{mon:a[i],day:o,sClass:e,time:i+1+"-"+o}}function follow(t){console.log(t);var e=t.depList,a=t.arrList,s=[],i="";if(null!=e)for(var o in e)s.push(e[o]);if(null!=a)for(var n in a)s.push(a[n]);for(var r in s){code=s[r].airlineCode||s[r].iata,flt=s[r].fltNo||"";var l;l=void 0==s[r].releaseStatus1?"计划":s[r].releaseStatus1,i=null!=s[r].airlineCode?"arr":"dep";var c=$("<li arrdep="+i+" data-fltId="+s[r].identification+'>\t\t\t<div class="title clearfix">\t\t\t\t<p class="icon fl"></p>\t\t\t\t<p class="fl name">'+s[r].iataCn+code+flt+'</p>\t\t\t</div>\t\t\t<div class="detail clearfix">\t\t\t\t<div class="fl">\t\t\t\t\t<p class="time">'+s[r].sdtTime+'</p>\t\t\t\t\t<p class="city">'+s[r].startAirportNameCn+'</p>\t\t\t\t</div>\t\t\t\t<p class="status fl">'+l+'</p>\t\t\t\t<div class="fl">\t\t\t\t\t<p class="time">'+s[r].destSdtTime+'</p>\t\t\t\t\t<p class="city">'+s[r].destAirportNameCn+"</p>\t\t\t\t</div>\t\t\t</div>\t\t</li>");c.appendTo($(".list ul"));var d=getStateColor(l);c.find(".status").css({color:d}),c.find(".title .icon").css({background:"url(images/"+code+".gif) no-repeat",backgroundSize:"contain"})}}$(document).ready(function(){dialogA=Dialog.init("alert");var t=sessionStorage.getItem("token")||getUrlQueryString("token")||"9999";setSessionValue("token",t);var e=sessionStorage.getItem("reverse")||"false";setSessionValue("reverse",e);var a=sessionStorage.getItem("month")||"";setSessionValue("month",a),sessionStorage.getItem("city")&&($(".select").val(sessionStorage.getItem("city")),$(".select").attr({"data-code":sessionStorage.getItem("cityCode")}),$(".tab li").removeClass("active"),$(".tab li").eq(1).addClass("active"),$(".cont").removeClass("active"),$(".cont").eq(1).addClass("active")),sessionStorage.getItem("company")&&($(".depart input").val("重庆"),$("#company").val(sessionStorage.getItem("company")),$("#company").attr({"data-code":sessionStorage.getItem("companyCode")}),$(".company span").show(),$(".tab li").removeClass("active"),$(".tab li").eq(1).addClass("active"),$(".cont").removeClass("active"),$(".cont").eq(1).addClass("active")),"null"==sessionStorage.getItem("company")&&$("#company").val(""),"true"==sessionStorage.getItem("reverse")&&($(".address .depart input").appendTo($(".address .dest")),$(".address .dest input").eq(0).appendTo($(".address .depart"))),$(".tab li").each(function(e){$(this).on("click",function(){if($(".tab li").removeClass("active"),$(this).addClass("active"),$(".cont").removeClass("active"),$(".cont").eq(e).addClass("active"),2==e){var a={url:"http://airtest.rtmap.com/service-api/subscribe/getFollowList?token="+t,success:function(t){follow(t)}};ajaxBase(a),$(".btn").hide()}else $(".btn").show()})});var s={url:"http://airtest.rtmap.com/service-api/flight/getServerTime?token="+t,success:function(t){for(var e=Math.floor(t.time),a=-1;a<2;a++){var s;s=0==a?formatsTime(e,"active"):1==a?formatsTime(e+864e5*a,"none"):formatsTime(e+864e5*a,""),createDate(s)}}};ajaxBase(s,!1),$(".date .arrdep li").on("click",function(){$(".date .arrdep li").removeClass("active"),$(this).addClass("active")}),$(".date .time").on("click","li",function(){$(this).parents(".cont").find(".date .time li").removeClass("active"),$(this).addClass("active")}),$(".city .address .cut").on("click",function(){"false"==sessionStorage.getItem("reverse")?setSessionValue("reverse","true"):setSessionValue("reverse","false"),$(".address .depart input").appendTo($(".address .dest")),$(".address .dest input").eq(0).appendTo($(".address .depart"))}),$(".btn").on("click",function(){var t,e=$(".cont.active"),a=new Date,s=a.getFullYear(),i=s+"-"+e.find(".date .time li.active").attr("data-time");if(e.hasClass("flight")){t=$(".arrdep li.active").attr("data-arrdep");var o=e.find(".flightno input").val();/^(\w{2})?[0-9]{3,4}([a-zA-Z]{1})?$/g.test(o)&&""!=o?window.location.href="list.html?flightNo="+o+"&arrdep="+t+"&dateStr="+i+"&type=flight":(dialogA.show(),dialogA.setValue("","请输入正确的航班号"))}else if(e.hasClass("city")){t="重庆"==$(".address .depart input").val()?"dep":"arr";var n=e.find(".depart input").attr("data-code"),r=e.find(".dest input").attr("data-code"),l=$(".cont .company input").attr("data-code");window.location.href="list.html?startStation="+n+"&endStation="+r+"&arrdep="+t+"&dateStr="+i+"&airLine="+l+"&type=city"}}),$(".select").on("click",function(){window.location.href="city.html"+window.location.search}),$(".company input").on("click",function(){window.location.href="company.html"+window.location.search}),$(".company span").on("click",function(){$(".company input").val(""),$(".company input").attr({"data-code":""}),sessionStorage.setItem("company",null),$(".company span").hide()}),$(".follow .list").on("click","li",function(){var t=$(this).attr("data-fltid"),e=$(this).attr("arrdep");window.location.href="detail.html?fltId="+t+"&arrdep="+e})});
//# sourceMappingURL=maps/portal.js.map

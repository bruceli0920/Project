(function(){window.createDetailPage=function(l){if(0!=$(".route_detail").length){var e=$(".route_detail .route_info  .info_list .right .fa-angle-up");if(0!=e.length)for(var a=0;a<e.length;a++)$(e[a]).removeClass("fa-angle-up"),$(e[a]).addClass("fa-angle-down"),$(e[a]).parents("li").find(".list_steps").css({height:0});for(a=0;a<arguments.length;a++)arguments[a].hasOwnProperty("index")?($(".route_detail .route_info div[class\x3d'bright_attention']").removeClass("bright_attention").addClass("normal_border"),$(".route_detail .route_info div[true_index\x3d"+arguments[a].index+"]").parent().prev().find(".right").trigger("click"),$(".route_detail .route_info div[true_index\x3d"+arguments[a].index+"]").removeClass("normal_border").addClass("bright_attention")):$(".route_detail .route_info div[index\x3d'1']").parent().prev().find(".right").trigger("click");$(".route_detail").show().animate({top:"0"},300)}else{removeSetStartPage();removeDetailPage();var f=$(".set_point").find(".set_end").val().substr(0,$(".set_point").find(".set_end").val().indexOf("---"));routePlanningPage("\u524d\u5f80 "+f,function(){var a=parseInt(l.distance/1E3);$(".route_planning_title .target_distance").html("\u5171"+a+"\u7c73");$(".route_planning_title .target_time").html("\u9884\u8ba1:"+parseInt(a/90)+"\u5206"+parseInt(a%90)+"\u79d2")});Rtmap.Scene.setAllowPoiClick(!1);$(".plant_loading").remove();var g=$("\x3cdiv class\x3d'route_detail'\x3e\x3c/div\x3e"),e=$("\x3cdiv class\x3d'pull_down'\x3e\x3cimg src\x3d'./public/img/info_list_pull_down.png' width\x3d'100%' height\x3d'100%'/\x3e\x3c/div\x3e"),a=$(".set_point_page .set_start"),a=a.val().split("---")[0]||a.val(),a=$("\x3cdiv class\x3d'route_start'\x3e\x3cdiv class\x3d'left'\x3e\x3cimg src\x3d'./public/img/info_list_start.png' width\x3d'25px' height\x3d'25px'/\x3e\x3cspan\x3e"+a+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e"),k=$("\x3cdiv class\x3d'route_info'\x3e\x3c/div\x3e"),h=$(".set_point_page .set_end"),f="\u6211\u7684\u4f4d\u7f6e"===h.val()?"\u6211\u7684\u4f4d\u7f6e":h.val().split("---")[0],f="\u6211\u7684\u4f4d\u7f6e"===h.val()?"\u6211\u7684\u4f4d\u7f6e":h.val().split("---")[0]||h.val(),f=$("\x3cdiv class\x3d'route_end'\x3e\x3cdiv class\x3d'left'\x3e\x3cimg src\x3d'./public/img/info_list_end.png' width\x3d'25px' height\x3d'25px'/\x3e\x3cspan\x3e"+f+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e");(function(a){var e=[],c=a.pointlist;if(0!=a.result.error_code)alert(a.message);else{a=$("\x3cul\x3e\x3c/ul\x3e");a.css({"text-align":"left"});for(var d=[],b=0;b<c.length;b++){if(0==b||-1==c[b].floor.indexOf(c[b-1].floor))"true"==c[b].important&&e.push(b),0==b||"8"!=c[b-1].action&&"9"!=c[b-1].action&&"10"!=c[b-1].action&&"11"!=c[b-1].action||(d=$("\x3cli\x3e\x3cdiv class\x3d'info_list'\x3e\x3cdiv class\x3d'left'\x3e\x3cdiv class\x3d'icon'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'right'\x3e\x3cspan class\x3d'content'\x3e"+c[b].desc+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e"),d.find(".info_list").css({position:"relative",display:"inline-block",height:"50px"}),d.find(".info_list .left").css({position:"relative",top:"1px",right:"-6px",display:"inline-block",width:"50px",height:"100%","font-size":"30px","border-radius":"25px","text-align":"center",color:"#cc7e60"}),d.find(".info_list .left .icon").css({width:"35px",height:"35px","background-image":"url("+hashDirection[c[b-1].action][0]+")","background-size":"100%","background-repeat":"no-repeat","margin-top":"7.5px","margin-left":"7.5px"}),d.find(".info_list .right").css({position:"relative",display:"inline-block","background-image":"url(./public/img/elevator_info.png)","background-size":"100% 100%",height:"70%","line-height":"210%",width:"180px",top:"-19px",left:"10px","text-align":"center"}),d.find(".info_list .right .content").css({"font-size":"12px",color:"#918683"}),a.append(d)),d=$("\x3cli\x3e\x3cdiv class\x3d'info_list'\x3e\x3cdiv class\x3d'left'\x3e"+c[b].floor.toUpperCase()+"\x3c/div\x3e\x3cdiv class\x3d'right'\x3e\x3ci class\x3d'content'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/br\x3e\x3cspan\x3e\x3c/span\x3e\x3c/i\x3e\x3ci class\x3d'fa fa-angle-down'\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'list_steps'\x3e\x3c/div\x3e\x3c/li\x3e"),d.find(".info_list").css({position:"relative",display:"inline-block",height:"50px",width:"100%"}),d.find(".info_list .left").css({position:"relative",top:"-13px",right:"-6px",display:"inline-block",width:"50px",height:"50px","line-height":"50px","background-image":"url(./public/img/info_list_left.png)","background-size":"100%","font-size":"20px","text-align":"center",color:"#cc7e60","vertical-align":"middle"}),d.find(".info_list .right").css({position:"relative",display:"inline-block","background-image":"url(./public/img/info_list_right.png)","background-size":"100% 100%",height:"50px",width:"80%","text-align":"center"}),d.find(".info_list .right i").css({display:"inline-block","font-style":"normal",color:"#cc7e60","font-size":"12px","line-height":"25px"}),d.find(".info_list .right i span").css({color:"#cc7e60"}),d.find(".info_list .fa").css({position:"absolute",right:"10px",top:"12px","font-size":"25px"}),d.find(".info_list .right").click(function(){if(-1!=$(this).find(".fa").attr("class").indexOf("down")){var a=$(this).parent().next(),b=40*a.find("div").length+"px";a.animate({height:b},300,function(){$(this).prev().find(".fa").removeClass("fa-angle-down").addClass("fa-angle-up")})}else $(this).parent().next().animate({height:0},300,function(){$(this).prev().find(".fa").removeClass("fa-angle-up").addClass("fa-angle-down")})});else if("true"==c[b].important){"true"==c[b].important&&e.push(b);if(!c[b+1]||-1==c[b].floor.indexOf(c[b+1].floor)){var f=d.find(".info_list .right .content span");f[0].innerText=c[b].desc.substr(0,c[b].desc.indexOf("\u7c73")+1);f[1].innerText=c[b].desc.substr(c[b].desc.indexOf("\u7c73")+1)}f=Math.round(parseInt(c[b].distance)/1E3);d.find(".list_steps").append("\x3cdiv class\x3d'normal_border' index\x3d"+b+" true_index\x3d"+e.indexOf(b)+"\x3e\x3cimg src\x3d'"+window.hashDirection[c[b].action][0]+"' width\x3d'30px' height\x3d'30px'/\x3e\x3ci style\x3d''\x3e\x3cspan\x3e\u6b65\u884c"+f+"\u7c73\u540e\x3c/span\x3e\x3c/br\x3e\x3cspan\x3e\u5728"+c[b].poi_name+"\u5904"+hashDirection[c[b].action][1]+"\x3c/span\x3e\x3c/i\x3e\x3c/div\x3e");d.find(".list_steps").css({position:"relative",height:0,overflow:"hidden",color:"#918683",top:"-1px"});d.find(".list_steps img").css({"margin-left":"15px","margin-top":"3px"});d.find(".list_steps i").css({display:"inline-block","font-size":"12px","font-style":"normal",color:"#918683","margin-left":"5px"});d.find(".list_steps div").css({background:"white",height:"40px",width:"70%","margin-left":"18%"});d.find(".list_steps div").unbind("click");d.find(".list_steps div").click(function(){accessLogAppender("opt_navidetail_line",Page.URL.getParameter("key"));var a=parseInt($(this).attr("true_index"));g.animate({top:"100%"},300,function(){g.hide();Page.TrackDashboard.render(a)});g.animate({top:"100%"},300,function(){g.hide()})})}a.append(d)}e=a.last().find("div").last().find("span")[1];$(e).html("\u5230\u8fbe");k.append(a);k.find(".list_steps").each(function(a){0===$(this).children().length&&$(this).parent().css({display:"none"})})}})(l);e.find("img").click(function(){accessLogAppender("opt_navidetail_top",Page.URL.getParameter("key"));g.animate({top:"100%"},300,function(){g.hide()})});a.click(function(a){a.stopPropagation();a.preventDefault()});$("body").append(g);g.append(e);g.append(a);g.append(k);g.append(f)}};window.removeDetailPage=function(){$(".route_detail").remove()}})();
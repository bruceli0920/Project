{"version":3,"sources":["portal.js"],"names":["createList","arr","arrdep","num","$","empty","i","length","place","sdtTime","actTime","status","json","flightNoStr","routeName","bFlag","startAirportNameCn","airlineCode","fltNo","destSdtTime","undefined","destActTime","destEstTime","destAirportNameCn","iata","estTime","releaseStatus1","route1AirportNameCn","push","route2AirportNameCn","route3AirportNameCn","route4AirportNameCn","route5AirportNameCn","route6AirportNameCn","oLi","depfId","join","appendTo","eq","find","show","color","getStateColor","css","liMarquee","scrollamount","runshort","hoverstop","boxWS","outerWidth","boxWP","boxWR","oH","document","outerHeight","height","str","colorName","ready","token","sessionStorage","getItem","getUrlQueryString","setSessionValue","filterFlag","pageNum","term","filterJson","url","data","arrOrDep","pageCount","domint","success","rst","lastPage","hide","totalCount","ajaxBase","each","index","this","on","removeClass","addClass","attr","siblings","airport","html","parents","oCont","filterStr","arrdpr","window","location","href","oBox","scroll","scrollTop","clientHeight","documentElement","body","top"],"mappings":"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","file":"../portal.js","sourcesContent":["$(document).ready(function () {\r\n\tvar token = sessionStorage.getItem('token') || getUrlQueryString('token');\r\n\tsetSessionValue('token', token);\r\n\tvar bFlag = true;\r\n\tvar filterFlag = false;\r\n\tvar pageNum = 1;\r\n\tvar pageSize = 15;\r\n\tvar str = 'dep';\r\n\tvar term = \"T2\";\r\n\t// var json = {\r\n\t// \turl: 'http://10.10.11.21:8989/api/flight/selectAllFlight?token=' + token,\r\n\t// \tdata: {\r\n\t// \t\t\"arrOrDep\": str,\r\n\t// \t\t\"pageNum\": pageNum,\r\n\t// \t\t\"pageCount\": pageSize,\r\n\t// \t\t\"term\": term\r\n\t// \t\t// \"date\":\"2017-05-11\"\r\n\t// \t},\r\n\t// \tsuccess: function (data) {\r\n\t// \t\tconsole.log(data);\r\n\t// \t\tif (data) {\r\n\t// \t\t\tbFlag = true;\r\n\t// \t\t\tcreateList(data.rst, str, json.data.pageNum);\r\n\t// \t\t\t//console.log(data.rst.lastPage);\r\n\t// \t\t\tif (data.lastPage || data.rst.length == 0) {\r\n\t// \t\t\t\tbFlag = false;\r\n\t// \t\t\t\t$('.msg').hide();\r\n\t// \t\t\t\t$('.msg.none').show()\r\n\t// \t\t\t}\r\n\t// \t\t} else {\r\n\t// \t\t\t$('.msg').hide();\r\n\t// \t\t\t$('.msg.none').show()\r\n\t// \t\t}\r\n\t// \t}\r\n\t// };\r\n\t// ajaxBase(json, false);\r\n\r\n\tvar filterJson = {\r\n\t\turl: 'http://10.10.11.21:8989/api/flight/selectFlightByCondition?token=' + token,\r\n\t\tdata: {\r\n\t\t\t\"arrOrDep\": str,\r\n\t\t\t\"pageNum\": pageNum,\r\n\t\t\t\"pageCount\": pageSize,\r\n\t\t\t\"status\": \"\",\r\n\t\t\t\"domint\": \"\",\r\n\t\t\t\"term\": term\r\n\t\t},\r\n\t\tsuccess: function (data) {\r\n\t\t\t// console.log(data);\r\n\t\t\tif (data) {\r\n\t\t\t\tfilterFlag = true;\r\n\t\t\t\tcreateList(data.rst, str, filterJson.data.pageNum);\r\n\t\t\t\t//console.log(data.rst.lastPage);\r\n\t\t\t\tif (data.lastPage || data.rst.length == 0) {\r\n\t\t\t\t\tfilterFlag = false;\r\n\t\t\t\t\t$('.msg').hide();\r\n\t\t\t\t\t$('.msg.none').show()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$('.msg').hide();\r\n\t\t\t\t$('.msg.no-match').show()\r\n\t\t\t}\r\n\t\t\tif (data.totalCount.length == 0) {\r\n\t\t\t\t$('.msg1').show();\r\n\t\t\t} else {\r\n\t\t\t\t$('.msg1').hide();\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\tajaxBase(filterJson, false);\r\n\r\n\t$('.tab li').each(function (index) {\r\n\t\tbFlag = true;\r\n\t\tfilterFlag = false;\r\n\t\t$(this).on('click', function () {\r\n\t\t\t$('.cont').eq(index).find('.option li').removeClass('active');\r\n\t\t\t$('.cont').eq(index).find('.option').eq(0).find('li').eq(0).addClass('active');\r\n\t\t\t$('.cont').eq(index).find('.option').eq(1).find('li').eq(0).addClass('active');\r\n\t\t\t// json.data.pageNum = 1;\r\n\t\t\tfilterJson.data.pageNum = 1;\r\n\t\t\tstr = $(this).attr('data-arrOrDep');\r\n\t\t\t$('.tab li').removeClass('active');\r\n\t\t\t$('.tab li').eq(index).addClass('active');\r\n\t\t\t$('.cont').removeClass('active');\r\n\t\t\t$('.cont').eq(index).addClass('active');\r\n\t\t\t// json.data.arrOrDep = str;\r\n\t\t\tfilterJson.data.arrOrDep = str;\r\n\t\t\t// ajaxBase(json, false);\r\n\t\t\t// console.log(filterJson);\r\n\t\t\tajaxBase(filterJson, false);\r\n\t\t});\r\n\t});\r\n\t$(\".tabs li\").on('click', function () {\r\n\t\t$(this).addClass(\"active\").siblings().removeClass(\"active\");\r\n\t\tvar airport = $(this).attr(\"data-airport\");\r\n\t\tterm = airport;\r\n\t\tfilterJson.data.term = term;\r\n\t\tpageNum = 1;\r\n\t\tfilterJson.data.pageNum = pageNum;\r\n\t\tif (str == \"dep\") {\r\n\t\t\t$('.list').eq(0).show().find('ul').html('');\r\n\t\t} else {\r\n\t\t\t$('.list').eq(1).show().find('ul').html('');\r\n\t\t};\r\n\t\tajaxBase(filterJson, false);\r\n\t});\r\n\t//筛选按钮\r\n\t$('.btn').on('click', function () {\r\n\t\t$('.cont .m-filter').hide();\r\n\t\t$('.cont.active').find('.m-filter').show();\r\n\t\t$('.g-box .cont.active .list .layer').show();\r\n\t});\r\n\r\n\r\n\t//点击筛选详情按钮\r\n\t$('.m-filter .option .item li').on('click', function () {\r\n\t\tfilterFlag = true;\r\n\t\tbFlag = false;\r\n\t\tvar parent = $(this).parents('.option');\r\n\t\tparent.find('li').removeClass('active');\r\n\t\t$(this).addClass('active');\r\n\t\tvar oCont = $('.cont.active .m-filter');\r\n\t\tvar status = oCont.find('.state li.active').attr('data-state');\r\n\t\tvar domint = oCont.find('.domint li.active').attr('data-domint');\r\n\t\tvar filterStr = $(\".m-header .tab li.active\").attr('data-arrordep');\r\n\t\tfilterJson.data.arrOrDep = filterStr;\r\n\t\tfilterJson.data.pageNum = 1;\r\n\t\tfilterJson.data.status = status;\r\n\t\tfilterJson.data.domint = domint;\r\n\t\t// ajaxBase(filterJson, false);\r\n\t});\r\n\t//点击遮罩层\r\n\t$('.cont .m-filter .shadow,.cont .m-filter .cancel').on('click', function () {\r\n\t\t$('.cont .m-filter').hide();\r\n\t\t$('.g-box .cont.active .list .layer').hide();\r\n\t});\r\n\t// 点击确定按钮\r\n\t$('.m-filter .button .on').on('click', function () {\r\n\t\t$('.cont .m-filter').hide();\r\n\t\t$('.g-box .cont.active .list .layer').hide();\r\n\t\tajaxBase(filterJson, false);\r\n\t});\r\n\r\n\t// 跳转页面\r\n\t$(\".cont .list\").on('click', 'li', function () {\r\n\t\tvar arrdpr = $(\".m-header .tab li.active\").attr('data-arrordep');\r\n\t\tvar data = $(this).attr('data-fltid');\r\n\t\twindow.location.href = \"/wyh_wechat/standard/flight/detail.html?fltId=\" + data + \"&arrdep=\" + arrdpr;\r\n\t});\r\n\r\n\t//页面滚动\r\n\tvar oBox = $('.g-box');\r\n\tvar oList = $('g-box .cont.active .list');\r\n\t$(document).scroll(function () {\r\n\t\tvar scrollTop = $(document).scrollTop();\r\n\t\tvar clientHeight = document.documentElement ? document.documentElement.clientHeight : document.body.clientHeight;\r\n\t\tvar top = oBox.outerHeight();\r\n\t\tvar aBtn = $('.tab li');\r\n\t\tvar h = scrollTop + clientHeight;\r\n\t\tif (h + 100 >= top && scrollTop > 100) {\r\n\t\t\tif (bFlag) {\r\n\t\t\t\t$('.msg').hide();\r\n\t\t\t\tbFlag = false;\r\n\t\t\t\t// json.data.pageNum++;\r\n\t\t\t\t// ajaxBase(json, false);\r\n\t\t\t\tfilterJson.data.pageNum++;\r\n\t\t\t\tajaxBase(filterJson, false);\r\n\t\t\t} else if (filterFlag) {\r\n\t\t\t\t$('.msg').hide();\r\n\t\t\t\tfilterFlag = false;\r\n\t\t\t\tfilterJson.data.pageNum++;\r\n\t\t\t\tajaxBase(filterJson, false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n\r\nfunction createList(arr, arrdep, num) {\r\n\t// console.log(arr, arrdep, num);\r\n\tif (num == 1) {\r\n\t\t//console.log(1);\r\n\t\t$('.cont .list ul').empty();\r\n\t}\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tvar json = arr[i];\r\n\t\tvar place, sdtTime, actTime, status, fltNo;\r\n\t\tvar flightNoStr = json.flightNoStr;\r\n\t\tvar routeName = [];\r\n\t\tvar bFlag = false;\r\n\t\tif (arrdep == 'arr') {\r\n\t\t\tplace = json.startAirportNameCn;\r\n\t\t\tfltNo = json.airlineCode + json.fltNo;\r\n\t\t\tsdtTime = json.destSdtTime || '-';\r\n\t\t\tif (json.destActTime != undefined) {\r\n\t\t\t\tactTime = json.destActTime;\r\n\t\t\t} else if (json.destEstTime != undefined) {\r\n\t\t\t\tactTime = json.destEstTime;\r\n\t\t\t\tbFlag = true;\r\n\t\t\t} else {\r\n\t\t\t\tactTime = '-';\r\n\t\t\t}\r\n\t\t} else if (arrdep == 'dep') {\r\n\t\t\tplace = json.destAirportNameCn;\r\n\t\t\tfltNo = json.iata + json.fltNo;\r\n\t\t\tsdtTime = json.sdtTime || '-';\r\n\t\t\tif (json.actTime != undefined) {\r\n\t\t\t\tactTime = json.actTime;\r\n\t\t\t} else if (json.estTime != undefined) {\r\n\t\t\t\tactTime = json.estTime;\r\n\t\t\t\tbFlag = true;\r\n\t\t\t} else {\r\n\t\t\t\tactTime = '-';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// if (json.sdtTime != undefined) {\r\n\t\t// \tsdtTime = json.sdtTime;\r\n\t\t// } else {\r\n\t\t// \tsdtTime = '-';\r\n\t\t// }\r\n\r\n\t\tif (json.releaseStatus1 != undefined) {\r\n\t\t\tstatus = json.releaseStatus1;\r\n\t\t} else {\r\n\t\t\tstatus = '计划';\r\n\t\t}\r\n\r\n\t\tif (json.route1AirportNameCn != undefined) {\r\n\t\t\trouteName.push(json.route1AirportNameCn);\r\n\t\t}\r\n\t\tif (json.route2AirportNameCn != undefined) {\r\n\t\t\trouteName.push(json.route2AirportNameCn);\r\n\t\t}\r\n\t\tif (json.route3AirportNameCn != undefined) {\r\n\t\t\trouteName.push(json.route3AirportNameCn);\r\n\t\t}\r\n\t\tif (json.route4AirportNameCn != undefined) {\r\n\t\t\trouteName.push(json.route4AirportNameCn);\r\n\t\t}\r\n\t\tif (json.route5AirportNameCn != undefined) {\r\n\t\t\trouteName.push(json.route5AirportNameCn);\r\n\t\t}\r\n\t\tif (json.route6AirportNameCn != undefined) {\r\n\t\t\trouteName.push(json.route6AirportNameCn);\r\n\t\t}\r\n\t\t//console.log(oruteName)\r\n\t\tif (routeName.length == 0) {\r\n\t\t\trouteName.push('-');\r\n\t\t}\r\n\t\t// console.log(json);\r\n\t\tvar oLi = $('<li data-fltId=' + json.depfId + '>' +\r\n\t\t\t'<div class=\"flightNoStr\"><p>' + flightNoStr + '</p></div>' +\r\n\t\t\t'<div class=\"place\"><p>' + (place || '-') + '</p></div>' +\r\n\t\t\t'<div class=\"routeName\"><p>' + routeName.join(', ') + '</p></div>' +\r\n\t\t\t'<div>' + sdtTime + '</div>' +\r\n\t\t\t'<div class=\"acttime\"><p class=\"tip\">预</p>' + actTime + '</div>' +\r\n\t\t\t// '<div class=\"terminalNo\">' + json.terminal + '</div>' +\r\n\t\t\t'<div class=\"status\">' + status + '</div>' +\r\n\t\t\t'</li>');\r\n\t\tif (arrdep == 'dep') {\r\n\t\t\toLi.appendTo($('.g-wrap .cont').eq(0).find('.list ul'));\r\n\t\t\t$('.list').eq(0).show();\r\n\t\t} else if (arrdep == 'arr') {\r\n\t\t\toLi.appendTo($('.g-wrap .cont').eq(1).find('.list ul'));\r\n\t\t\t$('.list').eq(1).show();\r\n\t\t};\r\n\t\tvar color = getStateColor(json.releaseStatus1);\r\n\t\toLi.find('.status').css({\r\n\t\t\t'color': color\r\n\t\t});\r\n\r\n\t\tif (bFlag) {\r\n\t\t\toLi.find('.acttime .tip').show();\r\n\t\t}\r\n\t\toLi.find('.str_origin').liMarquee({\r\n\t\t\tscrollamount: 20,\r\n\t\t\trunshort: false,\r\n\t\t\thoverstop: false\r\n\t\t});\r\n\t\tvar boxWS = oLi.find('.status').outerWidth();\r\n\t\tvar contWS = oLi.find('.status p').outerWidth();\r\n\t\t//console.log('boxWS==='+boxWS+'contWS===='+contWS);\r\n\t\tif (contWS > boxWS) {\r\n\r\n\t\t\toLi.find('.status').liMarquee({\r\n\t\t\t\tscrollamount: 20,\r\n\t\t\t\thoverstop: false\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar boxWP = oLi.find('.flightNoStr').outerWidth();\r\n\t\tvar contWP = oLi.find('.flightNoStr p').outerWidth();\r\n\t\tif (contWP > boxWP) {\r\n\t\t\toLi.find('.flightNoStr').liMarquee({\r\n\t\t\t\tscrollamount: 20,\r\n\t\t\t\thoverstop: false\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar boxWP = oLi.find('.place').outerWidth();\r\n\t\tvar contWP = oLi.find('.place p').outerWidth();\r\n\t\tif (contWP > boxWP) {\r\n\t\t\toLi.find('.place').liMarquee({\r\n\t\t\t\tscrollamount: 20,\r\n\t\t\t\thoverstop: false\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar boxWR = oLi.find('.routeName').outerWidth();\r\n\t\tvar contWR = oLi.find('.routeName p').outerWidth();\r\n\t\tif (contWR > boxWR) {\r\n\t\t\toLi.find('.routeName').liMarquee({\r\n\t\t\t\tscrollamount: 20,\r\n\t\t\t\thoverstop: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvar oH = $(document).outerHeight();\r\n\t$('.layer').css({\r\n\t\t'height': oH\r\n\t});\r\n}\r\n\r\n/*航班颜色：\r\n备降、取消、延误：c73a29\r\n正在登记、到达、起飞：1ec41a\r\n立即登机：ff6d0d\r\n补班延误：b911be\r\n补班取消：999999*/\r\nfunction getStateColor(str) {\r\n\tvar colorName = '';\r\n\tswitch (str) {\r\n\t\tcase '备降':\r\n\t\tcase '取消':\r\n\t\tcase '延误':\r\n\t\t\tcolorName = '#c73a29';\r\n\t\t\tbreak;\r\n\t\tcase '正在登机':\r\n\t\tcase '到达':\r\n\t\tcase '起飞':\r\n\t\tcase '登机口关闭':\r\n\t\tcase '登机结束':\r\n\t\tcase '正在办票':\r\n\t\tcase '到下站':\r\n\t\tcase '返航':\r\n\t\tcase '滑回':\r\n\t\tcase '办票截止':\r\n\t\tcase '前方起飞':\r\n\t\t\tcolorName = '#1ec41a';\r\n\t\t\tbreak;\r\n\t\tcase '立即登机':\r\n\t\tcase '登机':\r\n\t\tcase '催促登机':\r\n\t\tcase '过站登机':\r\n\t\t\tcolorName = '#ff6d0d';\r\n\t\t\tbreak;\r\n\t\tcase '补班延误':\r\n\t\t\tcolorName = '#b911be';\r\n\t\t\tbreak;\r\n\t\tcase '补班取消':\r\n\t\t\tcolorName = '#999';\r\n\t\t\tbreak;\r\n\t\tcase undefined:\r\n\t\tcase '计划':\r\n\t\t\tcolorName = '#2a86c7';\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tcolorName = '#666';\r\n\t\t\tbreak;\r\n\t}\r\n\treturn colorName;\r\n}"]}
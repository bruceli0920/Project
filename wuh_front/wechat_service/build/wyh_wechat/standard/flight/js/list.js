function createList(t){console.log(t);for(var s=0;s<t.length;s++){var i,a,e=t[s];i=void 0==e.releaseStatus1?"计划":e.releaseStatus1,void 0!=e.iata?a=e.iata:void 0!=e.airlineCode&&(a=e.airlineCode);var l=e.identification,n=l.substring(l.length-1);if(e.flightNoStr.indexOf(",")>0){var r=e.flightNoStr.indexOf(",");e.flightNoStr=e.flightNoStr.slice(r+1);e.flightNoStr=e.flightNoStr.replace(new RegExp(",","gm"),"&nbsp;&nbsp;&nbsp;")+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";var c=$("<li data-fltId="+e.identification+'><div class="title clearfix"><i class="icon fl"></i><p class="fl">'+e.iataCn+a+e.fltNo+'</p><div class="f2"><span class="sharename">共享航班:</span><span class="shareflt"><span class="sharefltcon">'+e.flightNoStr+'</span></span></div></div><div class="detail clearfix"><div class="fl"><p class="time">'+e.sdtTime+'</p><p class="city">'+e.startAirportNameCn+'<span class="ter1">'+e.terminal+'</span></p></div><p class="status fl">'+i+'</p><div class="fl"><p class="time">'+e.destSdtTime+'</p><p class="city">'+e.destAirportNameCn+'<span class="ter2">'+e.terminal+'</span></p></div></div><div class="view">查看详情</div></li>')}else c=$("<li data-fltId="+e.identification+'><div class="title clearfix"><i class="icon fl"></i><p class="fl">'+e.iataCn+a+e.fltNo+'</p></div><div class="detail clearfix"><div class="fl"><p class="time">'+e.sdtTime+'</p><p class="city">'+e.startAirportNameCn+'<span class="ter1">'+e.terminal+'</span></p></div><p class="status fl">'+i+'</p><div class="fl"><p class="time">'+e.destSdtTime+'</p><p class="city">'+e.destAirportNameCn+'<span class="ter2">'+e.terminal+'</span></p></div></div><div class="view">查看详情</div></li>');c.appendTo($(".list ul"));var d=getStateColor(i);c.find(".status").css({color:d}),c.find(".title .icon").css({background:"url(images/"+a+".gif) no-repeat",backgroundSize:"contain"});var o=c.find(".shareflt").outerWidth();c.find(".shareflt span").outerWidth()>o&&c.find(".shareflt").liMarquee({scrollamount:20,hoverstop:!1}),"D"==n?($(".ter1").show(),$(".ter2").hide()):($(".ter1").hide(),$(".ter2").show())}}$(document).ready(function(){var t=!0,s=getUrlQueryString("type"),i=getUrlQueryString("arrdep"),a=getUrlQueryString("dateStr"),e=sessionStorage.getItem("token"),l={};if("flight"==s){var n=getUrlQueryString("flightNo");ajaxBase({url:"http://10.10.11.21:8989/api/flight/selectByFlightNoAndDate?token="+e,data:{flightNo:n,date:a,arrOrDep:i},success:function(s){s&&0!=s.length?(t=!0,createList(s)):($(".msg").hide(),$(".cqmsg").show())}},!1)}else if("city"==s){var r=getUrlQueryString("startStation"),c=getUrlQueryString("endStation"),d=getUrlQueryString("airLine");l={url:"http://10.10.11.21:8989/api/flight/selectByStationAndDate?token="+e,data:{startStation:r,endStation:c,date:a,arrOrDep:i,pageNum:1,pageCount:10,airLine:d},success:function(s){s&&0!=s.length?(t=!0,createList(s.rst),(s.lastPage||0==s.rst.length)&&(t=!1,$(".msg").hide(),0==s.totalCount&&$(".cqmsg").show())):($(".msg").hide(),$(".cqmsg").show())}},ajaxBase(l,!1)}$(".list ul").on("click","li",function(){var t=$(this).attr("data-fltId");window.location.href="detail.html?fltId="+t+"&arrdep="+i});var o=$(".list");$(".list ul");$(document).scroll(function(){var i=$(document).scrollTop(),a=document.documentElement?document.documentElement.clientHeight:document.body.clientHeight,e=o.outerHeight();$(".tab li");i+a+100>=e&&i>100&&t&&(t=!1,"city"==s&&(l.data.pageNum++,ajaxBase(l,!1)))})});
//# sourceMappingURL=maps/list.js.map

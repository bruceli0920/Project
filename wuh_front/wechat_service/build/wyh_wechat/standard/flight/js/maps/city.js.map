{"version":3,"sources":["city.js"],"names":["createList","json","num","oCont","letter","list","$","eq","name","arr","appendTo","find","i","length","jsonTemp","cityCode","nameCn","html","setCity","obj","company","sessionStorage","getItem","companyCode","setSessionValue","attr","window","location","href","document","ready","interCity","domCity","token","ajaxBase","url","success","data","国外","国内","createHotList","each","index","this","on","removeClass","addClass","header_height","height","list_index","stop","animate","scrollTop","offset","top","str","val","toUpperCase","hide","show","search","empty","isEmptyObject","json1"],"mappings":"AAoEA,SAASA,WAAWC,EAAMC,GACzB,IAAIC,EACAC,EACAC,EAAO,GACA,GAAPH,GACHC,EAAQG,EAAE,SAASC,GAAG,GACtBH,EAASE,EAAE,WAAWC,GAAG,IACR,GAAPL,IACVC,EAAQG,EAAE,SAASC,GAAG,GACtBH,EAASE,EAAE,WAAWC,GAAG,IAE1B,IAAK,IAAIC,KAAQP,EAAM,CACtB,IAAIQ,EAAMR,EAAKO,GAEfH,GAAQ,UAAYG,EAAO,IAAMA,EAAO,QAD9BF,EAAE,UAAYE,EAAO,IAAMA,EAAO,SAExCE,SAASP,EAAMQ,KAAK,OACxB,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAII,OAAQD,IAAK,CACpC,IAAIE,EAAWL,EAAIG,GACTN,EAAE,iBAAmBQ,EAASC,SAAW,IAAMD,EAASE,OAAS,SACvEN,SAASP,EAAMQ,KAAK,QAG1BP,EAAOO,KAAK,MAAMM,KAAKZ,GAGxB,SAASa,QAAQC,GAChB,IAAIC,EAAUC,eAAeC,QAAQ,WACjCC,EAAcF,eAAeC,QAAQ,eACrCF,GACHI,gBAAgB,UAAWJ,GAC3BI,gBAAgB,cAAeD,GAC/BC,gBAAgB,OAAQL,EAAIF,QAC5BO,gBAAgB,WAAYL,EAAIM,KAAK,gBAErCD,gBAAgB,OAAQL,EAAIF,QAC5BO,gBAAgB,WAAYL,EAAIM,KAAK,eAEtCC,OAAOC,SAASC,KAAO,cAzGxBtB,EAAEuB,UAAUC,MAAM,WACjB,IAAIC,EAAWC,EACXC,EAAQZ,eAAeC,QAAQ,SAUnCY,UARCC,IAAK,sDAAwDF,EAC7DG,QAAS,SAAUC,GAClBN,EAAYM,EAAKC,GAEjBtC,WADAgC,EAAUK,EAAKE,GACK,GACpBvC,WAAW+B,EAAW,MAGL,GAOnBG,UALCC,IAAK,6DAA+DF,EACpEG,QAAS,SAAUC,GAClBG,cAAcH,MAGM,GACtB/B,EAAE,WAAWmC,KAAK,SAAUC,GAC3BpC,EAAEqC,MAAMC,GAAG,QAAS,WACnBtC,EAAE,WAAWuC,YAAY,UACzBvC,EAAEqC,MAAMG,SAAS,UACjBxC,EAAE,SAASuC,YAAY,UACvBvC,EAAE,SAASC,GAAGmC,GAAOI,SAAS,cAIhCxC,EAAE,YAAYsC,GAAG,QAAS,KAAM,WAC/B1B,QAAQZ,EAAEqC,SAEXrC,EAAE,QAAQsC,GAAG,QAAS,KAAM,WAC3B1B,QAAQZ,EAAEqC,SAEX,IAAII,EAAgBzC,EAAE,aAAa0C,SACnC1C,EAAE,WAAWmC,KAAK,SAAUC,GAC3BpC,EAAEqC,MAAMC,GAAG,QAAS,KAAM,WACzB,IAAIK,EAAa3C,EAAEqC,MAAMD,QACzBpC,EAAE,aAAa4C,OAAOC,SACrBC,UAAW9C,EAAE,SAASC,GAAGmC,GAAO/B,KAAK,MAAMJ,GAAG0C,GAAYI,SAASC,IAAMP,GACvE,SAGLzC,EAAE,iBAAiBsC,GAAG,QAAS,WAC9B,IAAIW,EAAMjD,EAAEqC,MAAMa,MAAMC,cACpBF,EACHjD,EAAE,WAAWoD,OAEbpD,EAAE,WAAWqD,OAGd,IAAI1D,EAAO2D,OAAOL,EAAKvB,GACvB1B,EAAE,SAASC,GAAG,GAAGI,KAAK,MAAMkD,QACvBC,cAAc7D,IAClBD,WAAWC,EAAM,GAGlB,IAAI8D,EAAQH,OAAOL,EAAKxB,GACxBzB,EAAE,SAASC,GAAG,GAAGI,KAAK,MAAMkD,QACvBC,cAAcC,IAClB/D,WAAW+D,EAAO","file":"../city.js","sourcesContent":["$(document).ready(function () {\r\n\tvar interCity, domCity;\r\n\tvar token = sessionStorage.getItem('token');\r\n\tvar cityJson = {\r\n\t\turl: 'http://10.10.11.21:8989/api/flight/getCities?token=' + token,\r\n\t\tsuccess: function (data) {\r\n\t\t\tinterCity = data.国外;\r\n\t\t\tdomCity = data.国内;\r\n\t\t\tcreateList(domCity, 0);\r\n\t\t\tcreateList(interCity, 1);\r\n\t\t}\r\n\t};\r\n\tajaxBase(cityJson, false);\r\n\tvar cityHotJson = {\r\n\t\turl: 'http://10.10.11.21:8989/api/flight/getSearchHotCity?token=' + token,\r\n\t\tsuccess: function (data) {\r\n\t\t\tcreateHotList(data);\r\n\t\t}\r\n\t};\r\n\tajaxBase(cityHotJson, false);\r\n\t$('.tab li').each(function (index) {\r\n\t\t$(this).on('click', function () {\r\n\t\t\t$('.tab li').removeClass('active');\r\n\t\t\t$(this).addClass('active');\r\n\t\t\t$('.cont').removeClass('active');\r\n\t\t\t$('.cont').eq(index).addClass('active');\r\n\t\t});\r\n\t});\r\n\t//点击列表\r\n\t$('.cont dl').on('click', 'dd', function () {\r\n\t\tsetCity($(this));\r\n\t});\r\n\t$('.hot').on('click', 'li', function () {\r\n\t\tsetCity($(this));\r\n\t});\r\n\tvar header_height = $(\".m-header\").height();\r\n\t$(\".letter\").each(function (index) {\r\n\t\t$(this).on('click', 'li', function () {\r\n\t\t\tvar list_index = $(this).index();\r\n\t\t\t$('html,body').stop().animate({\r\n\t\t\t\tscrollTop: $(\".list\").eq(index).find('dt').eq(list_index).offset().top - header_height\r\n\t\t\t}, 800);\r\n\t\t})\r\n\t});\r\n\t$('.search input').on('input', function () {\r\n\t\tvar str = $(this).val().toUpperCase();\r\n\t\tif (str) {\r\n\t\t\t$('.letter').hide();\r\n\t\t} else {\r\n\t\t\t$('.letter').show();\r\n\t\t}\r\n\t\t// if ($('.tab li.active').hasClass('dom')) {\r\n\t\tvar json = search(str, domCity);\r\n\t\t$('.cont').eq(0).find('dl').empty();\r\n\t\tif (!isEmptyObject(json)) {\r\n\t\t\tcreateList(json, 0)\r\n\t\t}\r\n\t\t// } else if ($('.tab li.active').hasClass('inter')) {\r\n\t\tvar json1 = search(str, interCity);\r\n\t\t$('.cont').eq(1).find('dl').empty();\r\n\t\tif (!isEmptyObject(json1)) {\r\n\t\t\tcreateList(json1, 1);\r\n\t\t}\r\n\t\t// }\r\n\r\n\t});\r\n});\r\n\r\nfunction createList(json, num) {\r\n\tvar oCont;\r\n\tvar letter;\r\n\tvar list = '';\r\n\tif (num == 0) {\r\n\t\toCont = $('.cont').eq(0);\r\n\t\tletter = $('.letter').eq(0);\r\n\t} else if (num == 1) {\r\n\t\toCont = $('.cont').eq(1);\r\n\t\tletter = $('.letter').eq(1);\r\n\t}\r\n\tfor (var name in json) {\r\n\t\tvar arr = json[name];\r\n\t\tvar oDt = $('<dt id=' + name + '>' + name + '</dt>');\r\n\t\tlist += '<li id=' + name + '>' + name + '</li>';\r\n\t\toDt.appendTo(oCont.find('dl'));\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tvar jsonTemp = arr[i];\r\n\t\t\tvar oDd = $('<dd data-code=' + jsonTemp.cityCode + '>' + jsonTemp.nameCn + '</dd>');\r\n\t\t\toDd.appendTo(oCont.find('dl'));\r\n\t\t}\r\n\t}\r\n\tletter.find('ul').html(list);\r\n}\r\n\r\nfunction setCity(obj) {\r\n\tvar company = sessionStorage.getItem('company');\r\n\tvar companyCode = sessionStorage.getItem('companyCode');\r\n\tif (company) {\r\n\t\tsetSessionValue('company', company);\r\n\t\tsetSessionValue('companyCode', companyCode);\r\n\t\tsetSessionValue('city', obj.html());\r\n\t\tsetSessionValue('cityCode', obj.attr('data-code'));\r\n\t} else {\r\n\t\tsetSessionValue('city', obj.html());\r\n\t\tsetSessionValue('cityCode', obj.attr('data-code'));\r\n\t};\r\n\twindow.location.href = \"portal.html\";\r\n\t// if (company) {\r\n\t// \twindow.location.href = 'portal.html?company=' + company + '&companyCode=' + companyCode + '&city=' + obj.html() + '&cityCode=' + obj.attr('data-code');\r\n\t// } else {\r\n\t// \twindow.location.href = 'portal.html?city=' + obj.html() + '&cityCode=' + obj.attr('data-code');\r\n\t// }\r\n}"]}
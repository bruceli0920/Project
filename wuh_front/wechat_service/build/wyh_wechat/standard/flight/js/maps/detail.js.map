{"version":3,"sources":["detail.js"],"names":["arrdep","getUrlQueryString","createDetail","json","token","icon","follow","status","flt","fltInfo","sub","subscribeStatus","time","identification","split","timeStr","substring","timeStart","timeEnd","fltiden","fltStrarr","length","releaseStatus1","actTime","name","value","estTime","destActTime","destEstTime","airlineCode","bltDisp","bltOt","arr","iata","cntDisp","gateDisp","firstGatOt","slice","error","flightNoStr","indexOf","x","replace","RegExp","obj","$","startAirportNameCn","terminal","destAirportNameCn","iataCn","fltNo","sdtTime","destSdtTime","color","getStateColor","find","css","background","backgroundSize","appendTo","boxWS","outerWidth","liMarquee","scrollamount","hoverstop","show","hide","after","addClass","html","on","flyno","cntTerminalNo","ajaxBase","url","data","success","localStorage","removeItem","locations","JSON","stringify","newstr","undefined","i","setItem","point","details","buildId","buildingId","window","location","href","floor","xCoord","yCoord","detail","document","ready","fltId","sessionStorage","getItem","this","reload"],"mappings":"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","file":"../detail.js","sourcesContent":["var arrdep = getUrlQueryString('arrdep');\r\n$(document).ready(function () {\r\n\tvar fltId = getUrlQueryString('fltId');\r\n\tvar token = sessionStorage.getItem('token');\r\n\tvar json = {\r\n\t\turl: 'http://10.10.11.21:8989/api/flight/getFltDetial?token=' + token,\r\n\t\tdata: {\r\n\t\t\tidentification: fltId\r\n\t\t},\r\n\t\tsuccess: function (data) {\r\n\t\t\t// console.log(token);\r\n\t\t\tcreateDetail(data,token);\r\n\t\t}\r\n\t};\r\n\tajaxBase(json);\r\n\r\n\t$('.g-wrap').on('click', \".guanzhu\", function () {\r\n\t\tif ($(this).html() == \"关注航班\") {\r\n\t\t\tvar json = {\r\n\t\t\t\turl: 'http://10.10.11.21:8989/api/subscribe/followFlight?token=' + token,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tidentification: fltId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\tlocation.reload();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tvar json = {\r\n\t\t\t\turl: 'http://10.10.11.21:8989/api/subscribe/unfollowFlight?token=' + token,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tidentification: fltId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t// dialogA = Dialog.init('alert');\r\n\t\t\t\t\t// dialogA.show(); // 显示弹窗\r\n\t\t\t\t\t// dialogA.setValue('您确定取消关注吗？');\r\n\t\t\t\t\t// dialogA.off('confirm');\r\n\t\t\t\t\t// dialogA.on('confirm', function () {\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\t\tajaxBase(json);\r\n\t});\r\n});\r\nfunction createDetail(json,token) {\r\n\tvar flt = json.fltInfo;\r\n\tvar sub = json.subscribeStatus;\r\n\tvar fltStr = flt.identification.split('-');\r\n\tvar time = fltStr[2];\r\n\tvar timeStr = time.substring(0, 4) + '-' + time.substring(4, 6) + '-' + time.substring(6, 8);\r\n\tvar icon, follow, status;\r\n\tvar timeStart = {};\r\n\tvar timeEnd = {};\r\n\tvar fltiden = flt.identification;\r\n\t// TODO判断是否到达\r\n\tvar fltStrarr = fltiden.substring(fltiden.length - 1)\r\n\t// console.log(flt)\r\n\tif (flt.releaseStatus1) { \r\n\t\tstatus = flt.releaseStatus1;\r\n\t} else {\r\n\t\tstatus = '计划';\r\n\t}\r\n\tif (flt.actTime) {\r\n\t\ttimeStart.name = '实际起飞';\r\n\t\ttimeStart.value = flt.actTime;\r\n\t} else if (flt.estTime) {\r\n\t\ttimeStart.name = '预计起飞';\r\n\t\ttimeStart.value = flt.estTime;\r\n\t} else {\r\n\t\ttimeStart.name = '预计起飞';\r\n\t\ttimeStart.value = '-';\r\n\t}\r\n\tif (flt.destActTime) {\r\n\t\ttimeEnd.name = '实际到达';\r\n\t\ttimeEnd.value = flt.destActTime;\r\n\t} else if (flt.destEstTime) {\r\n\t\ttimeEnd.name = '预计到达';\r\n\t\ttimeEnd.value = flt.destEstTime;\r\n\t} else {\r\n\t\ttimeEnd.name = '预计到达';\r\n\t\ttimeEnd.value = '-';\r\n\t}\r\n\tif (arrdep == 'arr') {\r\n\t\ticon = flt.airlineCode;\r\n\t\tbltDisp = flt.bltDisp || '-';\r\n\t\tbltOt = flt.bltOt || '-';\r\n\t\tvar arr = [{\r\n\t\t\t\tname: '行李转盘',\r\n\t\t\t\tvalue: bltDisp\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '转盘开放时间',\r\n\t\t\t\tvalue: bltOt\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '出租车等待时长',\r\n\t\t\t\tvalue: '-'\r\n\t\t\t}\r\n\t\t];\r\n\t} else if (arrdep == 'dep') {\r\n\t\ticon = flt.iata;\r\n\t\tcntDisp = flt.cntDisp || '-';\r\n\t\tgateDisp = flt.gateDisp || '-';\r\n\t\ttry {\r\n\t\t\tfirstGatOt = flt.firstGatOt.slice(11, flt.firstGatOt.length).slice(0, 5) || '-';\r\n\t\t} catch (error) {\r\n\t\t\tfirstGatOt = '-';\r\n\t\t}\r\n\t\tvar arr = [\r\n\t\t\t// {name:'值机柜台',value:cntDisp},\r\n\t\t\t{\r\n\t\t\t\tname: '登机口开放时间',\r\n\t\t\t\tvalue: firstGatOt\r\n\t\t\t}, \r\n\t\t\t{\r\n\t\t\t\tname: '登机口',\r\n\t\t\t\tvalue: gateDisp\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '安检排队时长',\r\n\t\t\t\tvalue: '-'\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n\tif (sub == \"Y\") {\r\n\t\tfollow = '取消关注';\r\n\t} else {\r\n\t\tfollow = '关注航班';\r\n\t}\r\n\t// console.log(status)\r\n\tif (flt.flightNoStr.indexOf(\",\") > 0) {\r\n\t\tvar x = flt.flightNoStr.indexOf(\",\");\r\n\t\tflt.flightNoStr = flt.flightNoStr.slice(x + 1)\r\n\t\tvar replaceStr = ',';\r\n\t\tflt.flightNoStr = flt.flightNoStr.replace(new RegExp(replaceStr, 'gm'), '&nbsp;&nbsp;&nbsp;') + \"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\r\n\r\n\t\tvar obj = $('<div class=\"top clearfix\">' +\r\n\t\t\t'<div class=\"left fl\" style=\"float:none;margin:0 auto;border-right:0;\">' +\r\n\t\t\t'<div class=\"date\">' + timeStr + '</div>' +\r\n\t\t\t'<div class=\"clearfix address\">' +\r\n\t\t\t'<p class=\"fl start\">' + flt.startAirportNameCn + '<span class=\"ter1\">' + flt.terminal + '</span>' + '</p>' +\r\n\t\t\t'<p class=\"fl icon\"></p>' +\r\n\t\t\t'<p class=\"fl dest\">' + flt.destAirportNameCn + '<span class=\"ter2\">' + flt.terminal + '</span>'+ '</p>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'</div>' +\r\n\t\t\t// '<div class=\"right fl\">'+\r\n\t\t\t// \t'<img src=\"images/rain.png\" alt=\"\">'+\r\n\t\t\t// \t'<p>特大暴雨</p>'+\r\n\t\t\t// '</div>'+\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"cont\">' +\r\n\t\t\t'<div class=\"title clearfix\">' +\r\n\t\t\t'<p class=\"fl icon\"></p>' +\r\n\t\t\t'<p class=\"fl\">' + flt.iataCn + icon + flt.fltNo + '</p>' +\r\n\t\t\t'<div class=\"f2\"><span class=\"sharename\">共享航班:</span><span class=\"shareflt\"><span class=\"sharefltcon\">' + flt.flightNoStr + '</span></span></div>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"time\">' +\r\n\t\t\t'<ul>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p>' + timeStart.name + '</p>' +\r\n\t\t\t'<p>' + timeStart.value + '</p>' +\r\n\t\t\t'<p>计划：' + flt.sdtTime + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p>' + timeEnd.name + '</p>' +\r\n\t\t\t'<p>' + timeEnd.value + '</p>' +\r\n\t\t\t'<p>计划：' + flt.destSdtTime + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t'</ul>' +\r\n\t\t\t'<p class=\"status\">' + status + '</p>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"tip\">' +\r\n\t\t\t'<ul>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p class=\"value\">' + arr[0].value + '</p>' +\r\n\t\t\t'<p class=\"name\">' + arr[0].name + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p class=\"value\">' + arr[1].value + '</p>' +\r\n\t\t\t'<p class=\"name\">' + arr[1].name + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t// '<li>'+\r\n\t\t\t// \t'<p class=\"value\">'+arr[2].value+'</p>'+\r\n\t\t\t// \t'<p class=\"name\">'+arr[2].name+'</p>'+\r\n\t\t\t// '</li>'+\r\n\t\t\t'</ul>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"bottom\">' +\r\n\t\t\t'<ul class=\"clearfix\">' +\r\n\t\t\t'<li class=\"guanzhu\">' + follow + '</li>' +\r\n\t\t\t// '<li class=\"fl guide\">登机引导</li>'+\r\n\t\t\t// '<li class=\"fl\">退改签</li>'+\r\n\t\t\t// '<li class=\"fl\">在线值机</li>'+\r\n\t\t\t'</ul>' +\r\n\t\t\t'</div>'\r\n\t\t)\r\n\t} else { \r\n\t\tvar obj = $('<div class=\"top clearfix\">' +\r\n\t\t\t'<div class=\"left fl\" style=\"float:none;margin:0 auto;border-right:0;\">' +\r\n\t\t\t'<div class=\"date\">' + timeStr + '</div>' +\r\n\t\t\t'<div class=\"clearfix address\">' +\r\n\t\t\t'<p class=\"fl start\">' + flt.startAirportNameCn + '<span class=\"ter1\">' + flt.terminal + '</span>' + '</p>' +\r\n\t\t\t'<p class=\"fl icon\"></p>' +\r\n\t\t\t'<p class=\"fl dest\">' + flt.destAirportNameCn + '<span class=\"ter2\">' + flt.terminal + '</span>'+ '</p>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'</div>' +\r\n\t\t\t// '<div class=\"right fl\">'+\r\n\t\t\t// \t'<img src=\"images/rain.png\" alt=\"\">'+\r\n\t\t\t// \t'<p>特大暴雨</p>'+\r\n\t\t\t// '</div>'+\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"cont\">' +\r\n\t\t\t'<div class=\"title clearfix\">' +\r\n\t\t\t'<p class=\"fl icon\"></p>' +\r\n\t\t\t'<p class=\"fl\">' + flt.iataCn + icon + flt.fltNo + '</p>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"time\">' +\r\n\t\t\t'<ul>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p>' + timeStart.name + '</p>' +\r\n\t\t\t'<p>' + timeStart.value + '</p>' +\r\n\t\t\t'<p>计划：' + flt.sdtTime + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p>' + timeEnd.name + '</p>' +\r\n\t\t\t'<p>' + timeEnd.value + '</p>' +\r\n\t\t\t'<p>计划：' + flt.destSdtTime + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t'</ul>' +\r\n\t\t\t'<p class=\"status\">' + status + '</p>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"tip\">' +\r\n\t\t\t'<ul>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p class=\"value\">' + arr[0].value + '</p>' +\r\n\t\t\t'<p class=\"name\">' + arr[0].name + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t'<li>' +\r\n\t\t\t'<p class=\"value\">' + arr[1].value + '</p>' +\r\n\t\t\t'<p class=\"name\">' + arr[1].name + '</p>' +\r\n\t\t\t'</li>' +\r\n\t\t\t// '<li>'+\r\n\t\t\t// \t'<p class=\"value\">'+arr[2].value+'</p>'+\r\n\t\t\t// \t'<p class=\"name\">'+arr[2].name+'</p>'+\r\n\t\t\t// '</li>'+\r\n\t\t\t'</ul>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"bottom\">' +\r\n\t\t\t'<ul class=\"clearfix\">' +\r\n\t\t\t'<li class=\"guanzhu\">' + follow + '</li>' +\r\n\t\t\t// '<li class=\"fl guide\">登机引导</li>'+\r\n\t\t\t// '<li class=\"fl\">退改签</li>'+\r\n\t\t\t// '<li class=\"fl\">在线值机</li>'+\r\n\t\t\t'</ul>' +\r\n\t\t\t'</div>'\r\n\t\t)\r\n\t}\r\n\r\n\t\r\n\tvar color = getStateColor(status);\r\n\tobj.find('.status').css({\r\n\t\tcolor: color\r\n\t});\r\n\tobj.find('.title .icon').css({\r\n\t\tbackground: 'url(images/' + icon + '.gif)',\r\n\t\tbackgroundSize: 'contain'\r\n\t})\r\n\tobj.appendTo($('.g-wrap'));\r\n\tvar boxWS = $('.shareflt').outerWidth();\r\n\tvar contWS = $('.shareflt span').outerWidth();\r\n\t// console.log('boxWS===' + boxWS + 'contWS====' + contWS);\r\n\tif (contWS > boxWS) {\r\n\t\t\t$('.shareflt').liMarquee({\r\n\t\t\t\tscrollamount: 20,\r\n\t\t\t\thoverstop: false\r\n\t\t});\r\n\t}\r\n\tif (fltStrarr == \"D\") {\r\n\t\t$(\".ter1\").show();\r\n\t\t$(\".ter2\").hide();\r\n\t\t$(\".guanzhu\").after(\"<li class='fl guide'>登机引导</li>\");\r\n\t\tobj.find('.guanzhu').addClass('btnstyle');\r\n\t\tobj.find('.guide').addClass('btnstyle');\r\n\t\tobj.find('.guide').html('登机引导');\r\n\t\tobj.find('.guide').on('click', function () {\r\n\t\t\tvar flyno = flt.iata + flt.fltNo;\r\n\t\t\tvar cntTerminalNo = flt.cntTerminalNo;\r\n\t\t\tif (typeof (cntTerminalNo) == \"undefined\") {\r\n\t\t\t\tcntTerminalNo = \"T2\";\r\n\t\t\t}\r\n\r\n\t\t\tvar djdata = {\r\n\t\t\t\tfltNo: flyno,\r\n\t\t\t\tcntTerminalNo: cntTerminalNo,\r\n\t\t\t};\r\n\t\t\tvar djjson = {\r\n\t\t\t\turl: 'http://10.10.11.21:8989/api/flight/getBoardingLead?token=' + token,\r\n\t\t\t\tdata: djdata,\r\n\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\tlocalStorage.removeItem(\"locations\");\r\n\t\t\t\t\tlocalStorage.locations = JSON.stringify(data);\r\n\t\t\t\t\tvar newstr = '';\r\n\t\t\t\t\tif (data != undefined) {\r\n\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\t\tnewstr += JSON.stringify(data[i]) + '&';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//将打点的数据写到缓存\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"locations\");\r\n\t\t\t\t\t\tlocalStorage.setItem(\"locations\", newstr);\r\n\t\t\t\t\t\tlocalStorage.point = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdetail(data)\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tajaxBase(djjson, false);\r\n\r\n\r\n\t\t\t//登机导引地图模块\r\n\t\r\n\t\t\tfunction detail(data) {\r\n\t\t\t\tvar details = data\r\n\t\t\t\tif (fltStrarr == \"D\" && (details != undefined)) {\r\n\t\t\t\t\tvar buildId = details[0].buildingId;\r\n\t\t\t\t\tif (details.length == 3) {\r\n\t\t\t\t\t\twindow.location.href = 'map/index.html?key=k7i23869hd&buildid=' + buildId + '&labelstyle=circle-point';\r\n\t\t\t\t\t} else if (details.length == 1) {\r\n\t\t\t\t\t\tvar point = details.locations[0];\r\n\t\t\t\t\t\tlocalStorage.locations = '';\r\n\t\t\t\t\t\tlocalStorage.point = JSON.stringify(point);\r\n\t\t\t\t\t\tobj.find('.guide').html('登机口位置');\r\n\t\t\t\t\t\twindow.location.href = 'map/index.html?key=k7i23869hd&buildid=' + buildId + '&labelstyle=circle-point&floor=' +\r\n\t\t\t\t\t\t\tpoint.floor + '&center=[' + point.xCoord + ',' + point.yCoord + ']&zoom=19';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.find('.guide').hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t} else { \r\n\t\t$(\".ter1\").hide();\r\n\t\t$(\".ter2\").show();\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"]}
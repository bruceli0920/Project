{"version":3,"sources":["wx.proxy.js"],"names":["WXMANAGER","appId","jsApiList","card","cardId","wxFail","Dialog","init","show","wxchooseImage","choose","sizeType","split","sourceType","wx","chooseImage","count","success","fail","wxuploadImage","upload","uploadImage","localId","isShowProgressTips","wxdownloadImage","down","downloadImage","serverId","wxaddCard","json","code","obj","noLoading","url","contentType","data","cardExt","addCard","cardList","res","ready","ajaxBase","wxInit","apiList","ajaxobj","window","location","href","jsSdkSignature","config","debug","timestamp","nonceStr","signature","sign","error","alert"],"mappings":"AAIA,IAAIA,WACHC,MAAO,qBAEPC,WAAY,sBAAuB,wBAAyB,gBAAiB,mBAAoB,cAChG,aAAc,mBAAoB,YAAa,aAAc,YAAa,iBAAkB,cAAe,gBAC3G,cAAe,eAAgB,cAAe,gBAAiB,iBAAkB,iBAAkB,eAAgB,cACnH,iBAAkB,gBAAiB,iBAAkB,gBAAiB,yBAA0B,yBAA0B,cAC1H,aAAc,cAAe,0BAA2B,UAAW,aAAc,YAClFC,MACCC,OAAQ,OAMV,SAASC,SACGC,OAAOC,KAAK,SAClBC,KAAK,KAAK,UAOhB,SAASC,cAAcC,GACtB,IAAIC,EAAsC,iBAApBD,EAAOC,SAAwBD,EAAOC,SAASC,MAAM,KAAKF,EAAOC,WAAY,WAAW,cAC1GE,EAAyC,iBAArBH,EAAOG,WAAyBH,EAAOG,WAAWD,MAAM,KAAKF,EAAOG,aAAe,QAAQ,UACnHC,GAAGC,aACFC,MAAON,EAAOM,OAAS,EACvBL,SAAUA,EACVE,WAAYA,EACZI,QAASP,EAAOO,QAChBC,KAAMb,SAMR,SAASc,cAAeC,GACvBN,GAAGO,aACFC,QAASF,EAAOE,QAChBC,mBAAoB,EACpBN,QAAQG,EAAOH,QACfC,KAAKb,SAMP,SAASmB,gBAAiBC,GACzBX,GAAGY,eACFC,SAAUF,EAAKE,SACfJ,mBAAoB,EACpBN,QAAQQ,EAAKR,QACbC,KAAKb,SAOP,SAASuB,UAAUC,GAElB7B,UAAUG,KAAKC,OAASyB,EAAKzB,OAC7BJ,UAAUG,KAAK2B,KAAOD,EAAKC,KAG3B,IAYIC,GACHC,WAAW,EACXC,IAAK,wDACLC,YAAa,UACbC,MACC/B,OAAQJ,UAAUG,KAAKC,OACvB0B,KAAM9B,UAAUG,KAAK2B,MAEtBb,QApBiB,SAASmB,GAC1BtB,GAAGuB,SACFC,WACClC,OAAQJ,UAAUG,KAAKC,OACvBgC,QAASA,IAEVnB,QAAS,SAAUsB,GACI,mBAAfV,EAAKW,OAAwBX,EAAKW,MAAMD,QAgBlDE,SAASV,GAAK,GAQf,SAASW,OAAOX,GAMf,IAAIY,EAAgC,iBAAfZ,EAAIY,QAAsBZ,EAAIY,QAAQ/B,MAAM,KAAKmB,EAAIY,QAoBtEC,GACHX,IAAK,0DACLC,YAAa,UACbC,MACCF,IAAKY,OAAOC,SAASC,MAEtB9B,QAzBe,SAAU+B,GACzBlC,GAAGmC,QACFC,OAAO,EACPjD,MAAOD,UAAUC,MACjBkD,UAAWH,EAAeG,UAC1BC,SAAUJ,EAAeI,SACzBC,UAAWL,EAAeM,KAC1BpD,UAAWyC,GAAW3C,UAAUE,YAGjCY,GAAG0B,MAAM,WACa,mBAAdT,EAAIS,OAAwBT,EAAIS,UAExC1B,GAAGyC,MAAM,SAAUhB,GAClBiB,MAAMjB,MAYPP,WAAW,GAEZS,SAASG,GAAS","file":"../wx.proxy.js","sourcesContent":["/**\r\n * 微信js-sdk接口封装\r\n * 引用此js文件需要先引入common.js\r\n */\r\nvar WXMANAGER = {\r\n\tappId: \"wx50f0ad85669612b7\",\r\n\t// api 默认全部\r\n\tjsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'startRecord',\r\n\t\t'stopRecord', 'onVoiceRecordEnd', 'playVoice', 'pauseVoice', 'stopVoice', 'onVoicePlayEnd', 'uploadVoice', 'downloadVoice',\r\n\t\t'chooseImage', 'previewImage', 'uploadImage', 'downloadImage', 'translateVoice', 'getNetworkType', 'openLocation', 'getLocation',\r\n\t\t'hideOptionMenu', 'hideMenuItems', 'showOptionMenu', 'showMenuItems', 'hideAllNonBaseMenuItem', 'showAllNonBaseMenuItem', 'closeWindow',\r\n\t\t'scanQRCode', 'chooseWXPay', 'openProductSpecificView', 'addCard', 'chooseCard', 'openCard'],\r\n\tcard: { // 管理卡卷相关内容\r\n\t\tcardId: null // 卡卷id\r\n\t}\r\n}\r\n/**\r\n * 微信提示框\r\n */\r\nfunction wxFail(){\r\n\tvar lert = Dialog.init('alert');\r\n\tlert.show('微信','微信配置出错');\r\n}\r\n\r\n\r\n/**\r\n * 拍照或从手机相册中选图  \r\n */\r\nfunction wxchooseImage(choose) {\r\n\tvar sizeType = typeof choose.sizeType === \"string\" ? choose.sizeType.split(','):choose.sizeType ||['original','compressed'];\r\n\tvar sourceType = typeof choose.sourceType ===\"string\" ? choose.sourceType.split(','):choose.sourceType || ['album','camera']; \r\n\twx.chooseImage({\r\n\t\tcount: choose.count || 9,\r\n\t\tsizeType: sizeType,\r\n\t\tsourceType: sourceType,\r\n\t\tsuccess: choose.success,\r\n\t\tfail: wxFail\r\n\t});\r\n}\r\n/** \r\n * 上传图片\r\n */\r\nfunction wxuploadImage( upload ) {\r\n\twx.uploadImage({\r\n\t\tlocalId: upload.localId,\r\n\t\tisShowProgressTips: 1,\r\n\t\tsuccess:upload.success,\r\n\t\tfail:wxFail\r\n\t});\r\n}\r\n/** \r\n * 下载图片\r\n */\r\nfunction wxdownloadImage( down ) {\r\n\twx.downloadImage({\r\n\t\tserverId: down.serverId,\r\n\t\tisShowProgressTips: 1,\r\n\t\tsuccess:down.success,\r\n\t\tfail:wxFail\r\n\t});\r\n}\r\n\r\n/**\r\n * 投放卡券\r\n */\r\nfunction wxaddCard(json) {\r\n\t//1.设置处理卡券结果的处理函数\r\n\tWXMANAGER.card.cardId = json.cardId;\r\n\tWXMANAGER.card.code = json.code;\r\n\r\n\t// 卡卷配置\r\n\tvar _cardConfig = function(cardExt){\r\n\t\twx.addCard({\r\n\t\t\tcardList: [{\r\n\t\t\t\tcardId: WXMANAGER.card.cardId,\r\n\t\t\t\tcardExt: cardExt\r\n\t\t\t}],\r\n\t\t\tsuccess: function (res) {\r\n\t\t\t\ttypeof json.ready === 'function' && json.ready(res); // 卡卷配置成功执行函数\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t// 2.获取卡券扩展字段\r\n\tvar obj = {\r\n\t\tnoLoading: true, // 不显示loading层\r\n\t\turl: 'http://weixin.bcia.com.cn/aup/api/wechat/card/cardExt' || '/aup/api/wechat/card/cardExt',\r\n\t\tcontentType: 'default',//表单方式提交\r\n\t\tdata: {\r\n\t\t\tcardId: WXMANAGER.card.cardId,\r\n\t\t\tcode: WXMANAGER.card.code\r\n\t\t},\r\n\t\tsuccess:_cardConfig \r\n\r\n\t}\r\n\tajaxBase(obj, true);\r\n}\r\n\r\n/**\r\n * \r\n * 微信配置初始化\r\n * @param {any} obj\r\n */\r\nfunction wxInit(obj) {\r\n\t//1.获取签名\r\n\t//2. 微信配置初始化\r\n\t//3.配置完成后执行方法\r\n\r\n\t// 微信配置初始化\r\n\tvar apiList = typeof obj.apiList ==='string' ? obj.apiList.split(','):obj.apiList; // '','' / ['','']\r\n\tvar _doConfig = function( jsSdkSignature ){\r\n\t\twx.config({\r\n\t\t\tdebug: false,\r\n\t\t\tappId: WXMANAGER.appId,\r\n\t\t\ttimestamp: jsSdkSignature.timestamp,\r\n\t\t\tnonceStr: jsSdkSignature.nonceStr,\r\n\t\t\tsignature: jsSdkSignature.sign,\r\n\t\t\tjsApiList: apiList || WXMANAGER.jsApiList // api自己传入 或者 使用默认(全部api)\r\n\t\t});\r\n\r\n\t\twx.ready(function () {\r\n\t\t\ttypeof obj.ready === 'function' && obj.ready(); // 微信配置成功使用方法\r\n\t\t});\r\n\t\twx.error(function (res) {\r\n\t\t\talert(res);\r\n\t\t});\t\r\n\t}\r\n\t\r\n\t// 开始获取签名\r\n\tvar ajaxobj = {\r\n\t\turl: 'http://traffic.rtmap.com/aup/api/wechat/jssdk/signature' || '/aup/api/wechat/jssdk/signature',\r\n\t\tcontentType: 'default',//表单方式提交\r\n\t\tdata: {\r\n\t\t\turl: window.location.href\r\n\t\t},\r\n\t\tsuccess: _doConfig, //获取签名成功执行微信配置方法\r\n\t\tnoLoading: true // 不显示loading层\r\n\t};\r\n\tajaxBase(ajaxobj, true); // true 不添加公共参数\r\n\r\n}\r\n"]}